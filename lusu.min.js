var lusu={initialize:function(){},get:function(e,t){request=new XMLHttpRequest;request.open("GET",e,true);request.onload=function(){if(request.status>=200&&request.status<400){if(typeof t==="function"){t(request.responseText)}else if(typeof t==="object"){if(t["success"]!==undefined&&typeof t["success"]==="function"){t["success"](request.responseText)}}else{return request.responseText}}else{if(t["error"]!==undefined&&typeof t["error"]==="function"){t["error"]({error:"request status was invalid."})}}};request.onerror=function(e){if(t["error"]!==undefined&&typeof t["error"]==="function"){t["error"](e)}};request.send()},doc:{ready:function(e){if(document.addEventListener){document.addEventListener("DOMContentLoaded",e)}else{document.attachEvent("onreadystatechange",function(){if(document.readyState==="interactive"){e()}})}}},history:{regex:/<body\s*[^>]*>([\S\s]*?)<\/body>/i,push:function(e){if(e!==undefined){if(history&&history.pushState){history.pushState({page:e},"",e);this.historyDone(e)}}},historyDone:function(e){lusu.get(e,function(e){document.body.innerHTML=lusu.history.getBody(e);lusu.initialize()})},getBody:function(e){var t=this.regex.exec(e);var t=t!==null?t[1]:e;return t},change:function(){window.addEventListener("popstate",function(e){lusu.history.historyDone(e.state.page)})}},add:{elements:{}||[],eventListeners:function(e){this.elements=document.querySelectorAll(e);Array.prototype.forEach.call(this.elements,function(e){e.addEventListener("click",function(t){if(e.getAttribute("href")!==undefined){t.preventDefault();lusu.history.push(e.getAttribute("href"))}},false)})},unset:function(){for(var e=0;e<this.elements.length;e++){this.elements[e].removeEventListener("click")}}}};lusu.history.change();lusu.doc.ready(function(){lusu.initialize()})