var lusu={initialize:function(){lusu.add.eventListeners('a')},get:function(a,b){request=new XMLHttpRequest;request.open('GET',a,!0);request.onload=function(){if(200<=request.status&&400>request.status)if('function'===typeof b)b(request.responseText);else if('object'===typeof b)void 0!==b.success&&'function'===typeof b.success&&b.success(request.responseText);else return request.responseText;else void 0!==b.error&&'function'===typeof b.error&&b.error({error:'request status was invalid.'})};request.onerror=
function(a){void 0!==b.error&&'function'===typeof b.error&&b.error({error:a})};request.send()},doc:{ready:function(a){document.addEventListener?document.addEventListener('DOMContentLoaded',a):document.attachEvent('onreadystatechange',function(){'interactive'===document.readyState&&a()})}},history:{regex:/<body\s*[^>]*>([\S\s]*?)<\/body>/i,push:function(a){void 0!==a&&void 0!==history&&void 0!==history.pushState&&(history.pushState({page:a},'',a),this.done(a))},done:function(a){lusu.get(a,function(a){document.body.innerHTML=
lusu.history.getBody(a);lusu.initialize()})},getBody:function(a){var b=this.regex.exec(a);return b=null!==b?b[1]:a},change:function(){window.addEventListener('popstate',function(a){lusu.history.done(a.state.page)})}},add:{elements:{},eventListeners:function(a){this.elements=document.querySelectorAll(a);Array.prototype.forEach.call(this.elements,function(a){a.addEventListener('click',function(c){void 0!==a.getAttribute('href')&&history&&history.pushState&&(c.preventDefault(),lusu.history.push(a.getAttribute('href')))},
!1)})},unset:function(){for(var a=0;a<this.elements.length;a++)this.elements[a].removeEventListener('click')}}};lusu.history.change();lusu.doc.ready(function(){lusu.initialize()});